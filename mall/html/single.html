<!--
Author: W3layouts
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE html>
<html>
<head>
<title>Eshop</title>
<link href="css/bootstrap.css" rel='stylesheet' type='text/css' />
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="js/jquery.min.js"></script>

<link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="./css/components.css">
	<link rel="stylesheet" type="text/css" href="./css/login.css">

<!-- Custom Theme files -->
<link href="css/style.css" rel="stylesheet" type="text/css" media="all" />
<!-- Custom Theme files -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="Eshop Responsive web template, Bootstrap Web Templates, Flat Web Templates, Andriod Compatible web template, 
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyErricsson, Motorola web design" />
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
<!--webfont-->
<!-- for bootstrap working -->
	<script type="text/javascript" src="js/bootstrap-3.1.1.min.js"></script>
<!-- //for bootstrap working -->
<!-- cart -->
	<script src="js/simpleCart.min.js"> </script>
	<script src="js/userlogin.js"> </script>
<!-- cart -->
<link rel="stylesheet" href="css/flexslider.css" type="text/css" media="screen" />

</head>
<body>
	<!-- header-section-starts -->
	<div class="header">
		<div class="header-top-strip">
			<div class="container">
				<div class="header-top-left">
					<ul>
						<li><a href="personal.html" style="font-weight: bold;" id="myself">我的</a></li>
						<li id="logoin"><a href="account.html"><span class="glyphicon glyphicon-user"> </span>登录</a></li>
						<li id="regist"><a href="register2.html"><span class="glyphicon glyphicon-lock"> </span>注册</a></li>	
						<li>      </li><li>      </li><li>      </li><li>      </li>
						<li>      </li><li>      </li><li>      </li><li>      </li>
						<li>      </li><li>      </li><li>      </li><li>      </li>
						<li>      </li><li>      </li><li>      </li><li>      </li>
						<li>      </li><li>      </li><li>      </li><li>      </li>
						<li>      </li><li>      </li><li>      </li><li>      </li>
						<li><a href="promo.html" style="color: yellow;">点击进入活动页面</a></li>			
					</ul>
				</div>
				<div class="header-right">
						<div class="cart box_1">
							<p><a href="cart.html" class="simpleCart_empty">购物车</a></p>
						</div>
				</div>
				<div class="clearfix"> </div>
			</div>
		</div>
	</div>
	<!-- header-section-ends -->
	<div class="banner-top">
		<div class="container">
			<nav class="navbar navbar-default" role="navigation">
	    <div class="navbar-header">
	        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
		        <span class="sr-only">Toggle navigation</span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
	        </button>
				<div class="logo">
					<h1><a href="index.html"><span>E</span> -Shop</a></h1>
				</div>
	    </div>
	    <!--/.navbar-header-->
	
	    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
	        <ul class="nav navbar-nav">
				<li><a href="itemofcategory.html?itemCategoryId=1">大师咖啡</a></li>
		        <li><a href="itemofcategory.html?itemCategoryId=2">小鹿茶</a></li>
		        <li><a href="itemofcategory.html?itemCategoryId=3">瑞纳冰</a></li>
		        <li><a href="itemofcategory.html?itemCategoryId=4">鲜榨果蔬</a></li>
		        <li><a href="itemofcategory.html?itemCategoryId=5">经典饮品</a></li>
		        <li><a href="itemofcategory.html?itemCategoryId=6">健康轻食</a></li>
		        <li><a href="itemofcategory.html?itemCategoryId=9">幸运小食</a></li>
	        </ul>
	    </div>
	    <!--/.navbar-collapse-->
	</nav>
	<!--/.navbar-->
</div>
</div>

		<!-- content-section-starts -->
	<div class="container">
	   <div class="products-page">
			<div class="new-product">
				<div class="col-md-5 zoom-grid">
					<img style="width: 200px;height: auto;" id="itemImageUrl"/>
				</div>
				<div class="col-md-7 dress-info">

		<div class="form-group">
			<label class="control-label" id="itemName"/>
		</div>

		<div class="form-group">
			<label class="control-label" style="font-weight: bold;">品类</label>
			<label class="control-label" id="itemCategoryName"/>
		</div>

		<div class="form-group">
			<label class="control-label" id="itemDescription"/>
		</div>

		<div class="form-group">
			<label class="control-label" style="font-weight: bold;">价格</label>
			<label class="control-label" id="itemPrice"/>
		</div>
					

		<div class="form-group">
			<label class="control-label" style="font-weight: bold;">销量</label>
			<label class="control-label" id="itemSales"/>
		</div>
		<br><br><br><br>
		购买数量：<input style="width: 50px;border-color: blue;" class="form-control" id="amount"/>
		<br><br>
		<div class="form-actions">
			<button class="btn blue" id="addCart" type="submit">加入购物车</button>
			<button class="btn blue" id="createOrder" type="submit">下单</button><br><br><br><br>
		</div>
		</div>
<br><br>
<h4 style="color: blue;font-size: 20px;font-weight: bold;">用户评论</h4>
<p  style="color: blue;">______________________________________________________________________</p>
<p style="color: red;">___________________________________________________________________</p>
<br><br>	
<div id="mycontainer"></div>


<script type="text/javascript">
	function getParam(paramName) {            
		paramValue = "", isFound = !1;         
		if (this.location.search.indexOf("?") == 0 && this.location.search.indexOf("=") > 1) {               
			arrSource = unescape(this.location.search).substring(1, this.location.search.length).split("&"), i = 0;               
			while (i < arrSource.length && !isFound) 
				arrSource[i].indexOf("=") > 0 && 
				arrSource[i].split("=")[0].toLowerCase() == paramName.toLowerCase() && 
				(paramValue = arrSource[i].split("=")[1], isFound = !0), i++         
		}           
		return paramValue == "" && (paramValue = null), paramValue      
	}
	
	$("#amount").val(1);

	var g_itemVO = {};

	var g_commentList = [];
	
	jQuery(document).ready(function(){
		//获取商品详情
		$.ajax({
			type: "GET",
			url: "http://localhost:8080/item/getItem",
			data:{
				"itemId": getParam("itemId"),
			},
			xhrFields:{withCredentials:true},
			success: function(data){
				if(data.status == "success"){
					g_itemVO = data.data;
					reloadDom();
					if (g_itemVO.shelves==0) {
						$("#addCart").attr("disabled", true); 
						$("#createOrder").attr("disabled", true); 
						alert("商品下架了，去看看其他商品吧");
					}
					if (g_itemVO.shelves==2) {
						$("#addCart").attr("disabled", true); 
						$("#createOrder").attr("disabled", true); 
						alert("商品加入活动了，去活动界面看看吧");
					}
				}else{
					alert("获取信息失败，原因为"+data.data.errMsg);
				}
			},
			error: function(data){
				alert("获取信息失败，原因为"+data.responseText);
			}
		});

		//获取评论
		$.ajax({
			type: "GET",
			url: "http://localhost:8080/comment/listCommentOfItem",
			data:{
				"itemId": getParam("itemId"),
			},
			xhrFields:{withCredentials:true},
			success: function(data){
				if(data.status == "success"){
					g_commentList = data.data;
					reloadDomC();
				}else{
					alert("获取评论信息失败，原因为"+data.data.errMsg);
				}
			},
			error: function(data){
				alert("获取评论信息失败，原因为"+data.responseText);
			}
		});

		// 加入购物车
		$("#addCart").on("click",function(){
			var amount = $("#amount").val();
			if(g_itemVO.itemNumber<amount){
				alert("库存不足");
				return false;
			}
			$.ajax({
				type: "POST",
				contentType: "application/x-www-form-urlencoded",
				url: "http://localhost:8080/cart/addCart",
				data:{
					"itemId": g_itemVO.itemId,
					"amount": $("#amount").val(),
				},
				xhrFields:{withCredentials:true},
				success: function(data){
					if(data.status == "success"){
						alert("加入成功");
						window.location.reload();//刷新本界面
					}else{
						alert("加入失败，原因为"+data.data.errMsg);
						if (data.data.errCode==20003) {
							window.location.href="account.html";
						}
					}
				},
				error: function(data){
					alert("下单失败，原因为"+data.responseText);
				}
			});
		});

		$("#createOrder").on("click",function(){
			var amount = $("#amount").val();
			if(g_itemVO.itemNumber<amount){
				alert("库存不足");
				return false;
			}
			//下单
			$.ajax({
				type: "POST",
				contentType: "application/x-www-form-urlencoded",
				url: "http://localhost:8080/order/createOrder",
				data:{
					"itemId": g_itemVO.itemId,
					"amount": $("#amount").val(),
				},
				xhrFields:{withCredentials:true},
				success: function(data){
					if(data.status == "success"){
						alert("下单成功，请在15分钟内完成支付");
						window.location.href="orderdetail.html?orderId="+data.data.orderId;
					}else{
						alert("下单失败，原因为"+data.data.errMsg);
						if (data.data.errCode==20003) {
							window.location.href="account.html";
						}
					}
				},
				error: function(data){
					alert("下单失败，原因为"+data.responseText);
				}
			});
		});
		
	});

	function reloadDom(){
		$("#itemCategoryName").text(g_itemVO.itemCategoryName);
		$("#itemName").text(g_itemVO.itemName);
		$("#itemCategoryId").text(g_itemVO.itemCategoryId);
		$("#itemPrice").text(g_itemVO.itemPrice+"元");
		$("#itemSales").text(g_itemVO.itemSales);
		$("#itemDescription").text(g_itemVO.itemDescription);
		$("#itemImageUrl").attr("src",g_itemVO.itemImageUrl);
	}

	function reloadDomC(){
		var replyVOList= [];
		for (var i = 0; i < g_commentList.length; i++) {
			var commentVO = g_commentList[i];
			var dom = "<div><div class='form-group'><label class='control-label'>用户："+commentVO.userName+"</lable></div><div class='form-group'><label class='control-label'>"+commentVO.comments+"</lable></div><div class='form-group'><label class='control-label'>"+commentVO.createTime+"</lable></div><p>-----------------------------------------------</p><h5 style='color: blue;font-size: 16px;font-weight: bold;'>回复</h5><p>_________________________</p><div id='showreply"+commentVO.commentId+"'></div><br><p>-------------------------</p><br><div class='form-group'><input class='form-control' style='width: 400px;height: 40px' id='replys"+commentVO.commentId+"'/><br><button class='btn blue' data-id='"+commentVO.commentId+"' id='reply"+commentVO.commentId+"' type='submit'>回复</button></div><p style='color: red;'>_________________________________________________________________</p></div>";
			$("#mycontainer").append($(dom));

			$("#reply"+commentVO.commentId).on("click",function(){
				var replyContent = $("#replys"+$(this).data("id")).val();
				if (replyContent==null||replyContent=="") {
					alert("回复内容不能为空");
					return false;
				}
				//发送回复
				$.ajax({
					type: "POST",
					contentType: "application/x-www-form-urlencoded",
					url: "http://localhost:8080/comment/sendReply",
					data:{
						"commentId": $(this).data("id"),
						"replyContent": replyContent,
					},
					xhrFields:{withCredentials:true},
					success: function(data){
						if(data.status == "success"){
							alert("回复成功");
							window.location.reload();//刷新本界面
						}else{
							alert("回复失败，原因为"+data.data.errMsg);
							if (data.data.errCode==20003) {
								window.location.href="login.html";
							}
						}
					},
					error: function(data){
						alert("回复失败，原因为"+data.responseText);
					}
				});
			});

			$.ajax({
				type: "GET",
				url: "http://localhost:8080/comment/selectReplyByCommentId",
				data:{
					"commentId": commentVO.commentId,
				},
				xhrFields:{withCredentials:true},
				success: function(data){
					if(data.status == "success"){
						replyVOList = data.data;
						reloadDomReply();
					}else{
						alert("获取回复信息失败，原因为"+data.data.errMsg);
					}
				},
				error: function(data){
					alert("获取回复信息失败，原因为"+data.responseText);
				}
			});

			function reloadDomReply(){
				for (var i = 0; i < replyVOList.length; i++) {
					var replyVO = replyVOList[i];
					var dom2 = "<div><div class='form-group'><label class='control-label'>用户："+replyVO.userName+"</lable></div><div class='form-group'><label class='control-label'>"+replyVO.replyContent+"</lable></div><div class='form-group'><label class='control-label'>"+replyVO.createTime+"</lable></div></div>";
					$("#showreply"+replyVO.commentId).append($(dom2));
				}
			}

		}
	}
</script>



				<script src="js/imagezoom.js"></script>
					<!-- FlexSlider -->
					<script defer src="js/jquery.flexslider.js"></script>
					<script>
						// Can also be used with $(document).ready()
						$(window).load(function() {
						  $('.flexslider').flexslider({
							animation: "slide",
							controlNav: "thumbnails"
						  });
						});
					</script>
				</div>
				<div class="clearfix"></div>
					<div class="reviews-tabs">
      <!-- Main component for a primary marketing message or call to action -->
      <ul class="nav nav-tabs responsive hidden-xs hidden-sm" id="myTab">
        <li class="test-class active"><a class="deco-none misc-class" href="#how-to">详情</a></li>
        <li class="test-class"><a href="#features">规格</a></li>
        <li class="test-class"><a class="deco-none" href="#source">评论</a></li>
      </ul>

      <div class="tab-content responsive hidden-xs hidden-sm">
        <div class="tab-pane active" id="how-to">
		 <p class="tab-text">Maecenas mauris velit, consequat sit amet feugiat rit, elit vitaeert scelerisque elementum, turpis nisl accumsan ipsum Lorem Ipsum is simply dummy text of the printing and typesetting industry. and scrambled it to make a type specimen book. It has survived Auction your website on Flippa and you'll get the best price from serious buyers, dedicated support and a much better deal than you'll find with any website broker. Sell your site today I need a twitter bootstrap 3.0 theme for the full-calendar plugin. it would be great if the theme includes the add event; remove event, show event details. this must be RESPONSIVE and works on mobile devices. Also, I've seen so many bootstrap themes that comes up with the fullcalendar plugin. However these . </p>    
        </div>
        <div class="tab-pane" id="features">
          <p class="tab-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum nibh urna, euismod ut ornare non, volutpat vel tortor. Integer laoreet placerat suscipit. Sed sodales scelerisque commodo. Nam porta cursus lectus. Proin nunc erat, gravida a facilisis quis, ornare id lectus. Proin consectetur nibh quis urna gravida mollis.This tab has icon in consectetur adipiscing eliconse consectetur adipiscing elit. Vestibulum nibh urna, ctetur adipiscing elit. Vestibulum nibh urna, t.consectetur adipiscing elit. Vestibulum nibh urna,  Vestibulum nibh urna,it.</p>
		  <p class="tab-text">Lorem ipsum dolor sit amet, consectetur adipisicing elit,There are many variations of passages of Lorem Ipsum available, 
									sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
		</div>
        <div class="tab-pane" id="source">
		  <div class="response">
						<div class="media response-info">
							<div class="media-left response-text-left">
								<a href="#">
									<img class="media-object" src="images/icon1.png" alt="" />
								</a>
								<h5><a href="#">Username</a></h5>
							</div>
							<div class="media-body response-text-right">
								<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,There are many variations of passages of Lorem Ipsum available, 
									sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
								<ul>
									<li>MARCH 21, 2015</li>
									<li><a href="single.html">Reply</a></li>
								</ul>
							</div>
							<div class="clearfix"> </div>
						</div>
						<div class="media response-info">
							<div class="media-left response-text-left">
								<a href="#">
									<img class="media-object" src="images/icon1.png" alt="" />
								</a>
								<h5><a href="#">Username</a></h5>
							</div>
							<div class="media-body response-text-right">
								<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,There are many variations of passages of Lorem Ipsum available, 
									sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
								<ul>
									<li>MARCH 26, 2054</li>
									<li><a href="single.html">Reply</a></li>
								</ul>		
							</div>
							<div class="clearfix"> </div>
						</div>
						<div class="media response-info">
							<div class="media-left response-text-left">
								<a href="#">
									<img class="media-object" src="images/icon1.png" alt="" />
								</a>
								<h5><a href="#">Username</a></h5>
							</div>
							<div class="media-body response-text-right">
								<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,There are many variations of passages of Lorem Ipsum available, 
									sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
								<ul>
									<li>MAY 25, 2015</li>
									<li><a href="single.html">Reply</a></li>
								</ul>		
							</div>
							<div class="clearfix"> </div>
						</div>
						<div class="media response-info">
							<div class="media-left response-text-left">
								<a href="#">
									<img class="media-object" src="images/icon1.png" alt="" />
								</a>
								<h5><a href="#">Username</a></h5>
							</div>
							<div class="media-body response-text-right">
								<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,There are many variations of passages of Lorem Ipsum available, 
									sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
								<ul>
									<li>FEB 13, 2015</li>
									<li><a href="single.html">Reply</a></li>
								</ul>		
							</div>
							<div class="clearfix"> </div>
						</div>
						<div class="media response-info">
							<div class="media-left response-text-left">
								<a href="#">
									<img class="media-object" src="images/icon1.png" alt="" />
								</a>
								<h5><a href="#">Username</a></h5>
							</div>
							<div class="media-body response-text-right">
								<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,There are many variations of passages of Lorem Ipsum available, 
									sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
								<ul>
									<li>JAN 28, 2015</li>
									<li><a href="single.html">Reply</a></li>
								</ul>		
							</div>
							<div class="clearfix"> </div>
						</div>
						<div class="media response-info">
							<div class="media-left response-text-left">
								<a href="#">
									<img class="media-object" src="images/icon1.png" alt="" />
								</a>
								<h5><a href="#">Username</a></h5>
							</div>
							<div class="media-body response-text-right">
								<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,There are many variations of passages of Lorem Ipsum available, 
									sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
								<ul>
									<li>APR 18, 2015</li>
									<li><a href="single.html">Reply</a></li>
								</ul>		
							</div>
							<div class="clearfix"> </div>
						</div>
						<div class="media response-info">
							<div class="media-left response-text-left">
								<a href="#">
									<img class="media-object" src="images/icon1.png" alt="" />
								</a>
								<h5><a href="#">Username</a></h5>
							</div>
							<div class="media-body response-text-right">
								<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,There are many variations of passages of Lorem Ipsum available, 
									sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
								<ul>
									<li>DEC 25, 2014</li>
									<li><a href="single.html">Reply</a></li>
								</ul>		
							</div>
							<div class="clearfix"> </div>
						</div>
					</div>
        </div>
      </div>		
	</div>

			</div>
			<div class="clearfix"></div>
			</div>
   </div>
   
  <!-- content-section-ends-here -->
		<div class="footer">
		<div class="container">
		 <div class="footer_top">
			<div class="span_of_4">
				<div class="col-md-3 span1_of_4">
					<h4>购买</h4>
					<ul class="f_nav">
						<li><a href="#">大师咖啡</a></li>
						<li><a href="#">小鹿茶</a></li>
						<li><a href="#">瑞纳冰</a></li>
						<li><a href="#">鲜榨果蔬</a></li>
						<li><a href="#">经典饮品</a></li>
						<li><a href="#">健康轻食</a></li>
						<li><a href="#">幸运小食</a></li>
					</ul>	
				</div>
				<div class="col-md-3 span1_of_4">
					<h4>帮助</h4>
					<ul class="f_nav">
						<li><a href="#">联系我们</a></li>
						<li><a href="#">电话</a></li>
						<li><a href="#">地址</a></li>
					</ul>	
				</div>
				<div class="col-md-3 span1_of_4">
					<h4>账户</h4>
					<ul class="f_nav">
						<li><a href="account.html">登录</a></li>
						<li><a href="register.html">注册</a></li>
						<li><a href="#">愿望清单</a></li>
						<li><a href="checkout.html">购物车</a></li>
					</ul>				
				</div>
				<div class="col-md-3 span1_of_4">
					<h4>喜爱</h4>
					<ul class="f_nav">
						<li><a href="#">卡布奇瑞</a></li>
						<li><a href="#">拿铁</a></li>
						<li><a href="#">焦糖玛奇朵</a></li>
						<li><a href="#">桃桃山雾乌龙茶</a></li>
						<li><a href="#">巧克力瑞纳冰</a></li>
					</ul>			
				</div>
				<div class="clearfix"></div>
				</div>
		  </div>
		  <div class="cards text-center">
				<img src="images/card.png" alt="" />
		  </div>
		  <div class="copyright text-center">
				<p>© 2019 Eshop. All Rights Reserved | Changed by   <a href="http://w3layouts.com">  W3layouts</a></p>
		  </div>
		</div>
		</div>
 <script src="js/responsive-tabs.js"></script>
    <script type="text/javascript">
      $( '#myTab a' ).click( function ( e ) {
        e.preventDefault();
        $( this ).tab( 'show' );
      } );

      $( '#moreTabs a' ).click( function ( e ) {
        e.preventDefault();
        $( this ).tab( 'show' );
      } );

      ( function( $ ) {
          // Test for making sure event are maintained
          $( '.js-alert-test' ).click( function () {
            alert( 'Button Clicked: Event was maintained' );
          } );
          fakewaffle.responsiveTabs( [ 'xs', 'sm' ] );
      } )( jQuery );

    </script>

</body>
</html>